<?php
/**
 * banner
 *
 * @copyright Copyright Â© 2020 Landofcoder. All rights reserved.
 * @author    landofcoder@gmail.com
 */
?>
<?php

$bannerCollection = $block->getBannerCollection();
$mediaUrl = $block->getMediaUrl();
$autoAdvance = $block->getAutoPlayConfig();
$effect = $block->getEffectConfig();
$interval = $block->getIntervalConfig();
$duration = $block->getDurationConfig();
$navigation = $block->getNavigationConfig();
$loader = $block->getLoaderConfig();
$pauseOnHover = $block->getPauseOnHoverConfig();
$buttonsPlayPause = $block->getPlayPauseButtonConfig();
$barPosition = $block->getBarPositionConfig();
$piePosition = $block->getPiePositionConfig();
?>

<?php


foreach ($bannerCollection as $banner) {
    $getImages = get_object_vars(json_decode($banner['images']));
    ?>
    <div id="camera_wrap_<?= $banner['banner_id'] ?>" data-id="<?= $banner['banner_id'] ?>"
         class="camera_slider">
        <?php
        foreach ($getImages as $image) {
            $imageUrl = $mediaUrl . $image;
            ?>
            <div data-src="<?= $imageUrl ?>">
                <div class="banner-title">
                    <b><?= $banner['title'] ?></b>
                </div>
                <img src=" <?= $imageUrl ?> ">
                <div class="camera_caption">
                    <p><?= $banner['description'] ?></p>
                </div>
            </div>
        <?php } ?>
    </div>
    <?php
}

?>


<style>
    .banner-title {
        color: #ffffff;
        background: rgba(0, 0, 0, 0.8);
        max-width: 15%;
        padding: 10px;
    }
</style>


<script>
    require([
        'jquery',
        'Lof_CategoryBannerSlider/js/jquery.easing.1.3',
        'Lof_CategoryBannerSlider/js/camera.min'
    ], function ($) {
        "use strict";
        $('.camera_slider').each(function () {
            const dataId = $(this).attr('data-id');
            const id = 'camera_wrap_' + dataId;
            console.log('#' + id);
            $('#' + id).camera({
                fx: "<?= $effect ?>",
                autoAdvance:<?= $autoAdvance ?>,
                playPause: <?= $buttonsPlayPause ?>,
                navigation: <?= $navigation ?>,
                navigationHover: true,
                hover: <?= $pauseOnHover ?>,
                loader: '<?=$loader?>',
                loaderColor: 'red',
                loaderBgColor: '#222222',
                loaderOpacity: 1,
                loaderPadding: 0,
                time: <?= $interval ?>,
                transPeriod: <?= $duration ?>,
                pauseOnClick: <?= $autoAdvance ?>,
                pagination: <?= $navigation ?>,
                barPosition: '<?= $barPosition ?>',
                piePosition: '<?= $piePosition ?>',
            })
        })
    })
</script>